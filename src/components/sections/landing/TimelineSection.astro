---
import Section from "@components/Section.astro";
import { Rocket, Lightbulb, Hammer, Film, Trophy } from "lucide-astro";

const timelineData = [
  {
    day: "Jan 21",
    title: "Kickoff Stream",
    desc: "Rules, Team Formation, 'Vibe' explained.",
    date: "Day 0",
    icon: Rocket,
    color: "cyan",
  },
  {
    day: "Jan 22-24",
    title: "Idea Lock",
    desc: "Submit 1-paragraph problem statement. Upload Vibe Session #1.",
    date: "Day 1-3",
    icon: Lightbulb,
    color: "purple",
  },
  {
    day: "Jan 25-31",
    title: "Build Sprint",
    desc: "Async building. Office hours. Vibe Session #2 & #3 due.",
    date: "Day 4-10",
    icon: Hammer,
    color: "orange",
  },
  {
    day: "Feb 1-4",
    title: "Polish & Demo",
    desc: "Film 5 min demo. Submit Git Repo. Write 'Vibe Log'.",
    date: "Day 11-14",
    icon: Film,
    color: "pink",
  },
  {
    day: "Feb 5",
    title: "Grand Finale",
    desc: "Live Judging. Awards. Future Hacking.",
    date: "Day 15",
    icon: Trophy,
    color: "yellow",
    special: true,
  },
];

const colorMap = {
  cyan: {
    bg: "bg-cyan-500/20",
    border: "border-cyan-500/30",
    hoverBorder: "hover:border-cyan-400",
    text: "text-cyan-400",
    glow: "shadow-cyan-500/30",
    dot: "bg-cyan-500",
    line: "from-cyan-500",
  },
  purple: {
    bg: "bg-purple-500/20",
    border: "border-purple-500/30",
    hoverBorder: "hover:border-purple-400",
    text: "text-purple-400",
    glow: "shadow-purple-500/30",
    dot: "bg-purple-500",
    line: "from-purple-500",
  },
  orange: {
    bg: "bg-orange-500/20",
    border: "border-orange-500/30",
    hoverBorder: "hover:border-orange-400",
    text: "text-orange-400",
    glow: "shadow-orange-500/30",
    dot: "bg-orange-500",
    line: "from-orange-500",
  },
  pink: {
    bg: "bg-pink-500/20",
    border: "border-pink-500/30",
    hoverBorder: "hover:border-pink-400",
    text: "text-pink-400",
    glow: "shadow-pink-500/30",
    dot: "bg-pink-500",
    line: "from-pink-500",
  },
  yellow: {
    bg: "bg-yellow-500/20",
    border: "border-yellow-500/30",
    hoverBorder: "hover:border-yellow-400",
    text: "text-yellow-400",
    glow: "shadow-yellow-500/30",
    dot: "bg-yellow-500",
    line: "from-yellow-500",
  },
};
---

<Section title="Timeline" subtitle="15 Days to Build Something Amazing" id="timeline" gradient="none">
  <div class="relative max-w-4xl mx-auto">
    <!-- Timeline vertical line with gradient -->
    <div class="absolute left-6 md:left-1/2 top-0 bottom-0 w-1 md:-translate-x-1/2">
      <div class="h-full bg-gradient-to-b from-cyan-500 via-purple-500 via-orange-500 via-pink-500 to-yellow-500 rounded-full opacity-30"></div>
    </div>

    {
      timelineData.map((item, index) => {
        const colors = colorMap[item.color as keyof typeof colorMap];
        const Icon = item.icon;
        const isEven = index % 2 === 0;

        return (
          <div
            class={`timeline-item relative flex items-center mb-12 ${
              item.special ? "mb-0" : ""
            } ${isEven ? "md:flex-row" : "md:flex-row-reverse"}`}
            style={`animation-delay: ${index * 0.15}s`}
          >
            {/* Spacer for alternating layout */}
            <div class="hidden md:block md:w-1/2" />

            {/* Timeline dot with icon */}
            <div class="absolute left-6 md:left-1/2 transform -translate-x-1/2 z-10">
              <div
                class={`relative w-12 h-12 rounded-2xl ${colors.bg} border ${colors.border} flex items-center justify-center ${colors.text} transition-all duration-500 hover:scale-110 ${
                  item.special ? "w-16 h-16 animate-pulse shadow-lg " + colors.glow : ""
                }`}
              >
                <Icon size={item.special ? 28 : 22} />
                {item.special && (
                  <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-yellow-500/30 to-orange-500/30 animate-pulse"></div>
                )}
              </div>
            </div>

            {/* Content card */}
            <div
              class={`ml-20 md:ml-0 ${
                isEven ? "md:pr-16" : "md:pl-16"
              } w-full md:w-1/2`}
            >
              <div
                class={`group relative p-6 rounded-2xl bg-gradient-to-br from-neutral-900/80 to-black/80 backdrop-blur-sm border ${
                  colors.border
                } ${colors.hoverBorder} transition-all duration-500 hover:shadow-xl ${
                  item.special ? "border-2 " + colors.glow + " shadow-lg" : ""
                }`}
              >
                {/* Gradient overlay on hover */}
                <div
                  class={`absolute inset-0 rounded-2xl bg-gradient-to-br ${colors.bg} opacity-0 group-hover:opacity-50 transition-opacity duration-500`}
                />

                <div class="relative z-10">
                  {/* Date badges */}
                  <div class="flex flex-wrap items-center gap-3 mb-3">
                    <span
                      class={`px-3 py-1 rounded-lg ${colors.bg} ${colors.text} font-mono font-bold text-sm uppercase tracking-wider`}
                    >
                      {item.day}
                    </span>
                    <span class="px-2 py-1 rounded-md bg-neutral-800/80 text-neutral-500 font-mono text-xs">
                      {item.date}
                    </span>
                  </div>

                  {/* Title */}
                  <h4
                    class={`text-xl md:text-2xl font-bold text-white mb-2 group-hover:${colors.text} transition-colors`}
                  >
                    {item.title}
                  </h4>

                  {/* Description */}
                  <p class="text-neutral-400 leading-relaxed">{item.desc}</p>
                </div>
              </div>
            </div>
          </div>
        );
      })
    }
  </div>

  <!-- Bottom accent -->
  <div class="flex justify-center mt-8">
    <div class="flex items-center gap-2">
      {
        ["cyan", "purple", "orange", "pink", "yellow"].map((color, i) => (
          <div
            class={`w-3 h-3 rounded-full bg-${color}-500 animate-pulse`}
            style={`animation-delay: ${i * 0.1}s`}
          />
        ))
      }
    </div>
  </div>
</Section>

<style>
  .timeline-item {
    animation: slideIn 0.6s ease-out both;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive adjustments for mobile */
  @media (max-width: 768px) {
    .timeline-item {
      flex-direction: row !important;
    }
  }
</style>
