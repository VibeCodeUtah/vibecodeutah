---
interface TimeLeft {
  days: number;
  hours: number;
  minutes: number;
  seconds: number;
}

// Vibe Coding Challenge Kickoff: January 21, 2026 (15 days before Feb 5th deadline)
const KICKOFF_DATE = "2026-01-21T00:00:00";

const calculateTimeLeft = (): TimeLeft => {
  const difference = +new Date(KICKOFF_DATE) - +new Date();
  let timeLeft: TimeLeft = { days: 0, hours: 0, minutes: 0, seconds: 0 };

  if (difference > 0) {
    timeLeft = {
      days: Math.floor(difference / (1000 * 60 * 60 * 24)),
      hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
      minutes: Math.floor((difference / 1000 / 60) % 60),
      seconds: Math.floor((difference / 1000) % 60),
    };
  }
  return timeLeft;
};

const timeLeft = calculateTimeLeft();
---

<div class="countdown-wrapper text-center">
  <p class="text-sm uppercase tracking-widest text-gray-400 mb-4">Kickoff In</p>
  <div
    class="flex gap-4 md:gap-8 justify-center text-yellow-500 font-mono"
    id="countdown-display"
  >
    {
      Object.keys(timeLeft).map((interval) => (
        <div class="flex flex-col items-center">
          <span class="text-3xl md:text-5xl font-bold countdown-value" data-interval={interval}>
            {timeLeft[interval as keyof TimeLeft] || "0"}
          </span>
          <span class="text-xs uppercase tracking-widest text-gray-500">
            {interval}
          </span>
        </div>
      ))
    }
  </div>
  <p class="text-xs text-gray-500 mt-4">Jan 21 - Feb 5, 2026</p>
</div>

<script>
  interface TimeLeft {
    days: number;
    hours: number;
    minutes: number;
    seconds: number;
  }

  const KICKOFF_DATE = "2026-01-21T00:00:00";

  function calculateTimeLeft(): TimeLeft {
    const difference = +new Date(KICKOFF_DATE) - +new Date();
    let timeLeft: TimeLeft = { days: 0, hours: 0, minutes: 0, seconds: 0 };

    if (difference > 0) {
      timeLeft = {
        days: Math.floor(difference / (1000 * 60 * 60 * 24)),
        hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
        minutes: Math.floor((difference / 1000 / 60) % 60),
        seconds: Math.floor((difference / 1000) % 60),
      };
    }
    return timeLeft;
  }

  function updateCountdown() {
    const timeLeft = calculateTimeLeft();
    const countdownDisplay = document.getElementById("countdown-display");
    if (countdownDisplay) {
      const valueElements = countdownDisplay.querySelectorAll(".countdown-value");
      valueElements.forEach((el) => {
        const interval = el.getAttribute("data-interval") as keyof TimeLeft;
        if (interval) {
          el.textContent = timeLeft[interval]?.toString() || "0";
        }
      });
    }
  }

  setInterval(updateCountdown, 1000);
</script>
